# Требования к API для бэкенда

## Проблема
Фронтенд не получает все данные:
- **Классы**: показывается только 11 классов вместо 66
- **Учителя**: показывается меньше учителей вместо 66
- **Студенты**: нужно по 30 студентов в каждом классе

---

## 1. Эндпоинт: GET /api/v1/classes

### Требования:
- **Должен возвращать ВСЕ классы** без ограничений по умолчанию
- **Поддержка фильтрации по школе**: `?school_id=SCHOOL_ID`
- **Поддержка пагинации** (опционально): `?page=1&limit=100`

### Ожидаемый формат ответа:

#### Вариант 1: Массив напрямую (предпочтительно)
```json
[
  {
    "id": "1",
    "name": "1А",
    "nameKz": "1А",
    "school_id": "school_123"
  },
  {
    "id": "2",
    "name": "1Ә",
    "nameKz": "1Ә",
    "school_id": "school_123"
  },
  {
    "id": "3",
    "name": "1Б",
    "nameKz": "1Б",
    "school_id": "school_123"
  },
  {
    "id": "4",
    "name": "1С",
    "nameKz": "1С",
    "school_id": "school_123"
  },
  {
    "id": "5",
    "name": "1Д",
    "nameKz": "1Д",
    "school_id": "school_123"
  },
  {
    "id": "6",
    "name": "1Г",
    "nameKz": "1Г",
    "school_id": "school_123"
  }
  // ... и так далее для всех 11 классов (1-11) × 6 букв = 66 классов
]
```

#### Вариант 2: Объект с пагинацией
```json
{
  "items": [
    {
      "id": "1",
      "name": "1А",
      "nameKz": "1А",
      "school_id": "school_123"
    }
    // ... все 66 классов
  ],
  "total": 66,
  "count": 66,
  "page": 1,
  "limit": 100
}
```

### Структура данных класса:
- `id` (string, обязательное) - уникальный идентификатор
- `name` (string, обязательное) - название на русском (например, "1А")
- `nameKz` (string, обязательное) - название на казахском (например, "1А")
- `school_id` (string, обязательное) - ID школы

### Важно:
- **По умолчанию возвращать ВСЕ классы** (без лимита)
- Если используется пагинация, `limit` по умолчанию должен быть достаточно большим (≥100)
- Если запрос без `school_id`, возвращать классы для всех школ (или для школы текущего пользователя)

---

## 2. Эндпоинт: GET /api/v1/teachers

### Требования:
- **Должен возвращать ВСЕ учителей** без ограничений по умолчанию
- **Поддержка фильтрации по школе**: `?school_id=SCHOOL_ID`
- **Поддержка пагинации** (опционально): `?page=1&limit=100`

### Ожидаемый формат ответа:

#### Вариант 1: Массив напрямую (предпочтительно)
```json
[
  {
    "id": "1",
    "full_name": "Иванов Иван Иванович",
    "name": "Иванов И.И.",
    "nameKz": "Иванов И.И.",
    "email": "teacher1@example.com",
    "school_id": "school_123"
  },
  {
    "id": "2",
    "full_name": "Петров Петр Петрович",
    "name": "Петров П.П.",
    "nameKz": "Петров П.П.",
    "email": "teacher2@example.com",
    "school_id": "school_123"
  }
  // ... всего 66 учителей
]
```

#### Вариант 2: Объект с пагинацией
```json
{
  "items": [
    {
      "id": "1",
      "full_name": "Иванов Иван Иванович",
      "name": "Иванов И.И.",
      "nameKz": "Иванов И.И.",
      "email": "teacher1@example.com",
      "school_id": "school_123"
    }
    // ... все 66 учителей
  ],
  "total": 66,
  "count": 66,
  "page": 1,
  "limit": 100
}
```

### Структура данных учителя:
- `id` (string, обязательное) - уникальный идентификатор
- `full_name` (string, обязательное) - полное имя
- `name` (string, опциональное) - краткое имя на русском
- `nameKz` (string, опциональное) - краткое имя на казахском
- `email` (string, обязательное) - email
- `school_id` (string, обязательное) - ID школы

### Важно:
- **По умолчанию возвращать ВСЕ учителей** (без лимита)
- Если используется пагинация, `limit` по умолчанию должен быть достаточно большим (≥100)

---

## 3. Эндпоинт: GET /api/v1/students

### Требования:
- **Должен возвращать ВСЕ студентов** для указанного класса
- **Поддержка фильтрации по классу**: `?class_id=CLASS_ID`
- **Поддержка пагинации** (опционально): `?page=1&limit=100`

### Ожидаемый формат ответа:

#### Вариант 1: Массив напрямую (предпочтительно)
```json
[
  {
    "id": "1",
    "full_name": "Алиев Али Алиевич",
    "name": "Алиев А.А.",
    "nameKz": "Әлиев Ә.Ә.",
    "class_id": "class_123"
  },
  {
    "id": "2",
    "full_name": "Беков Бек Бекович",
    "name": "Беков Б.Б.",
    "nameKz": "Беков Б.Б.",
    "class_id": "class_123"
  }
  // ... всего 30 студентов для каждого класса
]
```

#### Вариант 2: Объект с пагинацией
```json
{
  "items": [
    {
      "id": "1",
      "full_name": "Алиев Али Алиевич",
      "name": "Алиев А.А.",
      "nameKz": "Әлиев Ә.Ә.",
      "class_id": "class_123"
    }
    // ... все 30 студентов
  ],
  "total": 30,
  "count": 30,
  "page": 1,
  "limit": 100
}
```

### Структура данных студента:
- `id` (string, обязательное) - уникальный идентификатор
- `full_name` (string, обязательное) - полное имя
- `name` (string, опциональное) - краткое имя на русском
- `nameKz` (string, опциональное) - краткое имя на казахском
- `class_id` (string, обязательное) - ID класса

### Важно:
- **По умолчанию возвращать ВСЕ студентов** для класса (без лимита)
- Если используется пагинация, `limit` по умолчанию должен быть достаточно большим (≥100)
- **Каждый класс должен иметь 30 студентов**

---

## 4. Общие требования

### Аутентификация:
- Все эндпоинты требуют JWT токен в заголовке: `Authorization: Bearer TOKEN`
- Токен получается через `/api/v1/auth/login`

### Обработка ошибок:
- При отсутствии токена: `401 Unauthorized`
- При неверном токене: `401 Unauthorized`
- При отсутствии данных: возвращать пустой массив `[]` или `{ items: [], total: 0 }`

### CORS:
- Разрешить запросы с фронтенда (localhost:5173 в dev, ваш домен в production)
- Заголовки: `Access-Control-Allow-Origin: *` (или конкретный домен)

### Производительность:
- Если данных много, использовать пагинацию, но с большим лимитом по умолчанию (≥100)
- Или возвращать все данные сразу, если их не слишком много (<1000 записей)

---

## 5. Структура данных в базе

### Ожидаемая структура:

#### Классы (66 классов):
- 11 классов (1-11)
- По 6 букв для каждого класса: А, Ә, Б, С, Д, Г
- Итого: 11 × 6 = 66 классов

Примеры:
- 1А, 1Ә, 1Б, 1С, 1Д, 1Г
- 2А, 2Ә, 2Б, 2С, 2Д, 2Г
- ...
- 11А, 11Ә, 11Б, 11С, 11Д, 11Г

#### Учителя (66 учителей):
- 66 уникальных учителей
- Каждый привязан к школе через `school_id`

#### Студенты:
- По 30 студентов в каждом классе
- Итого: 66 классов × 30 студентов = 1980 студентов

---

## 6. Примеры запросов для тестирования

### Получить все классы:
```bash
GET /api/v1/classes?school_id=SCHOOL_ID
Authorization: Bearer TOKEN
```

### Получить всех учителей:
```bash
GET /api/v1/teachers?school_id=SCHOOL_ID
Authorization: Bearer TOKEN
```

### Получить студентов класса:
```bash
GET /api/v1/students?class_id=CLASS_ID
Authorization: Bearer TOKEN
```

---

## 7. Чеклист для бэкенда

- [ ] Эндпоинт `/api/v1/classes` возвращает все 66 классов
- [ ] Эндпоинт `/api/v1/teachers` возвращает все 66 учителей
- [ ] Эндпоинт `/api/v1/students?class_id=ID` возвращает 30 студентов для каждого класса
- [ ] Поддержка фильтрации по `school_id` для классов и учителей
- [ ] Поддержка фильтрации по `class_id` для студентов
- [ ] JWT аутентификация работает корректно
- [ ] CORS настроен правильно
- [ ] Формат ответа соответствует одному из указанных вариантов
- [ ] Нет скрытых лимитов на количество возвращаемых записей

---

## 8. Контакты для вопросов

Если есть вопросы по требованиям, обращайтесь к фронтенд разработчику.

**Важно**: После исправления API, пожалуйста, проверьте:
1. Что возвращается 66 классов при запросе `/api/v1/classes?school_id=ID`
2. Что возвращается 66 учителей при запросе `/api/v1/teachers?school_id=ID`
3. Что возвращается 30 студентов при запросе `/api/v1/students?class_id=ID`

